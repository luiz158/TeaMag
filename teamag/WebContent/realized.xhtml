<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Welcom to Teamag</title>
</h:head>
<h:body>


	<!-- <h:form>  
  
  
    <p:menubar>  
        <p:menuitem value="Retour Accueil" url="login.faces"  icon="ui-icon-home" />  
        <p:menuitem value="Réalisé" url="login.faces" icon="ui-icon-star" />
    </p:menubar>  
  
</h:form>  
 -->
	<p:growl id="growl" showDetail="true" life="3000" />

	<h1>
		Saisie du réalisé de
		<h:outputText value="#{workController.member.name}" />
	</h1>


	<h2>Nouvelle activité</h2>
	<hr />
	<h:form>
		<table border="0">
			<tr>
				<td><h:outputLabel value="Nom :" /></td>
				<td><h:inputText value="#{workController.newActivity.name}" /></td>
			</tr>
			<tr>
				<td><h:outputLabel value="Projet/Appli :" /></td>
				<td><h:inputText value="#{workController.newActivity.project}" /></td>
			</tr>
		</table>
		<h:commandButton value="Ajouter"
			action="#{workController.doCreateActivity}" />
	</h:form>


	<h:form id="form2">
		<p:growl id="messages" showDetail="true" />

		<p:dataTable var="workDay" value="#{workController.workDayList}"
			resizableColumns="true" id="wdList2" editable="true">


		</p:dataTable>
	</h:form>
	<hr />

	<h:form id="form">
		<p:growl id="messages" showDetail="true" />
		<p:dataTable var="workDay" value="#{workController.workDayList}" id="wdList" editable="true">

			<p:ajax event="rowEdit" listener="#{workController2.onEdit}"
				update=":form:messages" />
			<p:ajax event="rowEditCancel" listener="#{workController.onCancel}"
				update=":form:messages" />

			<p:column headerText="Jour" style="width:125px">  
				#{workDay.dayStr}
        </p:column>


			<p:column headerText="Absence" style="width:125px">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{workDay.absenceRate}" />
					</f:facet>
					<f:facet name="input">
						<h:inputText value="#{workDay.absenceRate}" style="width:100%" />
					</f:facet>
				</p:cellEditor>
			</p:column>


			<p:columns value="#{workDay.works}" var="work"
				columnIndexVar="colIndex" styleClass="ui-editable-column">

				<f:facet name="header">  
                #{work.activity.project} - #{work.activity.name}
            </f:facet>
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{work.total}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{work.total}" size="5" />
					</f:facet>
				</p:cellEditor>

			</p:columns>
			<p:column headerText="Options">
				<p:rowEditor />
			</p:column>
		</p:dataTable>
	</h:form>
</h:body>
</html>